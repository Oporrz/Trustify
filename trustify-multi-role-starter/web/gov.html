<!doctype html><html lang="th"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Trustify | Gov Dashboard</title>
<link rel="stylesheet" href="./style.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="./app.js"></script><script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head><body class="container">
<script>
const need='gov';
const current=localStorage.getItem('role');
if(current!==need){alert('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ');location.replace('./login.html');}
</script>

<div class="topbar">
  <div>üèõÔ∏è Government Dashboard</div>
  <div><a class="link" href="./login.html">Logout</a></div>
</div>

<h2>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á (Hotspot)</h2>
<div id="map" style="height:500px;border-radius:12px;overflow:hidden"></div>

<script>
const backend=localStorage.getItem('backend_url')||'';
const API=(p,o={})=>fetch(backend+p,o);

async function loadHotspot(){
  const r=await API('/api/scans/all');
  const j=r.ok?await r.json():[];
  const map=L.map('map').setView([13.736,100.523],6);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);
  j.filter(x=>x.label==='counterfeit').forEach(x=>{
    if(!x.lat)return;
    const m=L.marker([x.lat,x.lng]).addTo(map);
    m.bindPopup(`<b>${x.code}</b><br>${x.label} (${x.confidence}%)`);
  });
}
loadHotspot();
</script>
<a class="floating-assistant" href="./trustify-ai.html" title="Assistant">
  <img src="./assets/‡πÑ‡∏≠‡πÇ‡∏Å‡πâ.png" alt="Assistant">
</a>
</body></html>
