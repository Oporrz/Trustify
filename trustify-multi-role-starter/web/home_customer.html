<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Trustify | Home</title>
  <link rel="stylesheet" href="/style.css"><!-- optional -->
  <script src="/app.js"></script>
  <style>
    :root{
      --glass: rgba(0,0,0,.35);
      --stroke: rgba(255,255,255,.12);
      --ok:#10b981; --warn:#f59e0b; --bad:#ef4444;
    }
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto;
      color:#fff; min-height:100svh;
      background:url('/assets/bg_intro.jpg') center/cover fixed no-repeat, #0b1020;
      display:flex; flex-direction:column;
    }
    .topbar{
      display:flex; align-items:center; gap:12px; padding:14px 18px;
      background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,0));
      border-bottom:1px solid var(--stroke);
    }
    .brand{display:flex; align-items:center; gap:10px}
    .brand img{height:26px; opacity:.95}
    .spacer{flex:1}
    .points{display:flex; align-items:center; gap:8px; font-weight:600}
    .points .bubble{min-width:26px; height:26px; border-radius:999px; display:inline-grid; place-items:center;
      background:rgba(255,255,255,.12); border:1px solid var(--stroke); padding:0 8px}

    .wrap{max-width:1100px; margin:28px auto 40px; padding:0 18px}
    .hero{
      display:flex; align-items:center; gap:16px; padding:16px 18px;
      background:var(--glass); backdrop-filter: blur(10px); border:1px solid var(--stroke); border-radius:18px;
    }
    .hero .hi{font-size:14px; opacity:.85}
    .hero .welcome{font-size:20px; font-weight:800}
    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:18px; margin-top:18px}
    .card{
      background:var(--glass); backdrop-filter: blur(10px);
      border:1px solid var(--stroke); border-radius:18px; padding:16px;
    }
    .btn{
      border:0; border-radius:12px; padding:12px 14px; cursor:pointer; font-weight:700;
      background:#3358ff; color:#fff; width:100%;
    }
    .btn.ghost{background:transparent; border:1px dashed var(--stroke); color:#fff}
    .tile{display:flex; flex-direction:column; gap:10px; min-height:140px}
    .muted{opacity:.8}

    /* Floating Bear */
    .assistant-fab{
      position:fixed; right:20px; bottom:20px; z-index:9999;
      width:74px; height:74px; border-radius:50%; border:none; cursor:pointer;
      box-shadow:0 14px 36px rgba(0,0,0,.35); background:#ff4d00;
      display:flex; align-items:center; justify-content:center;
    }
    .assistant-fab img{width:64px; height:64px; border-radius:50%}

    @media (max-width: 980px){ .grid{grid-template-columns:1fr 1fr} }
    @media (max-width: 640px){ .grid{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <!-- Topbar -->
  <div class="topbar">
    <div class="brand">
      <img src="/assets/logo_trustify_white.png" alt="Trustify"/>
      <div class="muted">Consumer</div>
    </div>
    <div class="spacer"></div>
    <div class="points">😊 <span class="bubble" data-points>0</span></div>
  </div>

  <div class="wrap">
    <!-- Hero -->
    <section class="hero">
      <div><img src="/assets/logo_trustify_white.png" alt="" style="height:36px;opacity:.95"></div>
      <div>
        <div class="hi">Welcome back, <span id="who" class="muted">guest</span></div>
        <div class="welcome">Verify products before you buy.</div>
      </div>
      <div class="spacer"></div>
      <button class="btn ghost" onclick="logout()" style="width:auto">Log out</button>
    </section>

    <!-- Quick tiles -->
    <div class="grid">
      <div class="card tile">
        <div style="font-weight:800">Scan now</div>
        <div class="muted">Use your camera to scan QR / barcode, or upload a label image for OCR</div>
        <button class="btn" onclick="location.href='/scan.html'">Open Scanner</button>
      </div>

      <div class="card tile">
        <div style="font-weight:800">My history</div>
        <div class="muted">See your recent scans and results</div>
        <button class="btn" onclick="location.href='/history.html'">Open History</button>
      </div>

      <div class="card tile">
        <div style="font-weight:800">High-risk alerts</div>
        <div class="muted">Areas or products frequently reported as counterfeit</div>
        <button class="btn" onclick="location.href='/alerts.html'">View Hotspots</button>
      </div>

      <div class="card tile">
        <div style="font-weight:800">Report issue</div>
        <div class="muted">Submit counterfeit suspicion to help others</div>
        <button class="btn" onclick="location.href='/report.html'">Report</button>
      </div>

      <div class="card tile">
        <div style="font-weight:800">Points & rewards</div>
        <div class="muted">Earn points by scanning and reporting</div>
        <button class="btn" onclick="location.href='/points.html'">Check points</button>
      </div>

      <div class="card tile">
        <div style="font-weight:800">Help Center</div>
        <div class="muted">FAQs and support chat assistant</div>
        <button class="btn" onclick="location.href='/assistant.html'">Open assistant</button>
      </div>
    </div>
  </div>

  <!-- Floating Assistant (Bear) -->
  <button class="assistant-fab" onclick="location.href='/assistant.html'" aria-label="Assistant">
    <img src="/assets/bear.png" alt="">
  </button>

  <script>
    renderPoints();

    // guard: only customer (or guest) should be here
    (function guard(){
      const role = localStorage.getItem('role') || 'customer';
      if(role==='brand') location.replace('/brand.html');
      if(role==='gov')   location.replace('/gov.html');
    })();

    // show who
    (function who(){
      const em = localStorage.getItem('email');
      const guest = localStorage.getItem('guest_mode')==='true';
      document.getElementById('who').textContent = em || (guest? 'guest' : 'user');
    })();

    function logout(){
      localStorage.removeItem('role');
      localStorage.removeItem('guest_mode');
      // keep points if you want; or clear:
      // localStorage.removeItem('points');
      location.href='/login.html';
    }
  </script>
  <a class="btn ghost" href="./dashboard_brand.html">Open full dashboard</a></div></div></div><a class="floating-assistant" href="./trustify-ai.html" title="Assistant">
  <img src="./assets/ไอโก้.png" alt="Assistant">
</body>
</html>
